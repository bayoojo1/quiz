[current-affair]
exten => _0144000XX,1,NoOp(Quiz Platform)
;capture the number dialed
exten => _0144000XX,2,Set(NumCalled=${EXTEN})
;wait a little before welcoming caller
exten => _0144000XX,3,Wait(3)
;play the initial welcome greetings and instruction
exten => _0144000XX,4,Playback(/var/www/answerfive/html/questions/recording/welcome) // this has to be a .wav file
exten => _0144000XX,5,Wait(2)
;to listen to the instruction again press 5, to proceed to the questions, press 6
exten => _0144000XX,6(listenagain),Background(/var/www/answerfive/html/questions/recording/tolisten)
exten => _0144000XX,7, WaitExten(10)
; if you want to answer question on general knowledge, press 7, if you want question on sport, press 8
exten => _0144000XX,8(qoption),Background(/var/www/answerfive/html/questions/recording/questionoptions)
exten => _0144000XX,9,WaitExten(10)
exten => _0144000XX,10,Goto(qoption)

;options to repeat message or go to questions context
exten => 5,1,Wait(3)
same  => n,Playback(/var/www/answerfive/html/questions/recording/welcome)
same  => n,Goto(_0144000XX,listenagain)

exten => 6,1,Wait(3)
same  => n,Goto(_0144000XX,qoption)

;options for general questions
exten => 7,1,Wait(3)
same  => n,Goto(question-1,start,1)

;options for sport questions
exten => 8,1,Wait(3)
same  => n,Goto(sport-1,start,1)

;options for science questions
exten => 203,1,Wait(3)
same  => n,Goto(science-1,start,1)

;options for commercial questions
exten => 204,1,Wait(3)
same  => n,Goto(Commercial-1,start,1)

;options for art questions
exten => 205,1,Wait(3)
same  => n,Goto(art-1,start,1)

;options for monthly star questions
exten => 206,1,Wait(3)
same  => n,Goto(monthlystar-1,start,1)



[question-1]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q1) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${CURRENTAFFAIR_QUIZ(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score1=0)
; if option is equal to ${answer} then set score1 = 1 else set score1 = 0
exten => start,10,Set(score1=${IF($[${option} = ${answer}]?1:0)})
exten => start,11,GotoIf($["${score1}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(question-2,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(question-2,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(question-1,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(question-1,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(question-1,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(question-1,start,9)



[question-2]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q2) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${CURRENTAFFAIR_QUIZ(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press the keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score2=0)
; if option is equal to ${answer} then set score2 = 1 else set score2 = 0
exten => start,10,Set(score2=${IF($[${option} = ${answer}]?1:0)})
exten => start,11,GotoIf($["${score2}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(question-3,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(question-3,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(question-2,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(question-2,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(question-2,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(question-2,start,9)



[question-3]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q3) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${CURRENTAFFAIR_QUIZ(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score3=0)
; if option is equal to ${answer} then set score3 = 1 else set score3 = 0
exten => start,10,Set(score3=${IF($[${option} = ${answer}]?1:0)})
exten => start,11,GotoIf($["${score3}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(question-4,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(question-4,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(question-3,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(question-3,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(question-3,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(question-3,start,9)




[question-4]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q4) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${CURRENTAFFAIR_QUIZ(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score4=0)
; if option is equal to ${answer} then set score4 = 1 else set score4 = 0
exten => start,10,Set(score4=${IF($[${option} = ${answer}]?1:0)})
exten => start,11,GotoIf($["${score4}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(question-5,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(question-5,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(question-4,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(question-4,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(question-4,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(question-4,start,9)


[question-5]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q5) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${CURRENTAFFAIR_QUIZ(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score5=0)
; if option is equal to ${answer} then set score5 = 1 else set score5 = 0
exten => start,10,Set(score5=${IF($[${option} = ${answer}]?1:0)})
exten => start,11,GotoIf($["${score5}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Goto(update-value,start,1)
exten => start,15(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,16,Goto(update-value,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(question-5,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(question-5,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(question-5,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(question-5,start,9)



[update-value]
include => question-1
include => question-2
include => question-3
include => question-4
include => question-5
include => current-affair
exten => start,1,agi(/var/lib/asterisk/agi-bin/current_affair.php,${CALLERID(num)},${score1},${score2},${score3},${score4},${score5},${NumCalled})
exten => start,2,Playback(thank-you-for-calling)
exten => start,3,Wait(3)
exten => start,4,Playback(goodbye)
exten => start,5,Hangup()


;================SPORT QUESTIONS===================

[sport-1]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q1) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SPORT_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score1=0)
; if option is equal to ${answer} then set score1 = 1 else set score1 = 0
exten => start,10,Set(score1=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score1}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(sport-2,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(sport-2,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(sport-1,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(sport-1,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(sport-1,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(sport-1,start,9)



[sport-2]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q2) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SPORT_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score2=0)
; if option is equal to ${answer} then set score2 = 1 else set score2 = 0
exten => start,10,Set(score2=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score2}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(sport-3,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(sport-3,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(sport-2,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(sport-2,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(sport-2,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(sport-2,start,9)



[sport-3]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q3) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SPORT_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score3=0)
; if option is equal to ${answer} then set score3 = 1 else set score3 = 0
exten => start,10,Set(score3=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score3}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(sport-4,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(sport-4,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(sport-3,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(sport-3,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(sport-3,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(sport-3,start,9)




[sport-4]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q4) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SPORT_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score4=0)
; if option is equal to ${answer} then set score4 = 1 else set score4 = 0
exten => start,10,Set(score4=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score4}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(sport-5,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(sport-5,start,1)


exten => 1,1,Set(option=${EXTEN})
same => n,Goto(sport-4,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(sport-4,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(sport-4,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(sport-4,start,9)


[sport-5]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q5) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SPORT_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score5=0)
; if option is equal to ${answer} then set score5 = 1 else set score5 = 0
exten => start,10,Set(score5=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score5}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Goto(sport-value,start,1)
exten => start,15(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,16,Goto(sport-value,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(sport-5,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(sport-5,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(sport-5,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(sport-5,start,9)



[sport-value]
include => sport-1
include => sport-2
include => sport-3
include => sport-4
include => sport-5
include => current-affair
exten => start,1,agi(/var/lib/asterisk/agi-bin/sport.php,${CALLERID(num)},${score1},${score2},${score3},${score4},${score5},${NumCalled})
exten => start,2,Playback(thank-you-for-calling)
exten => start,3,Wait(3)
exten => start,4,Playback(goodbye)
exten => start,5,Hangup()



;================SCIENCE QUESTIONS===================

[science-1]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q1) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SCIENCE_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score1=0)
; if option is equal to ${answer} then set score1 = 1 else set score1 = 0
exten => start,10,Set(score1=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score1}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(science-2,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(science-2,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(science-1,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(science-1,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(science-1,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(science-1,start,9)



[science-2]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q2) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SCIENCE_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score2=0)
; if option is equal to ${answer} then set score2 = 1 else set score2 = 0
exten => start,10,Set(score2=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score2}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(science-3,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(science-3,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(science-2,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(science-2,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(science-2,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(science-2,start,9)



[science-3]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q3) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SCIENCE_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score3=0)
; if option is equal to ${answer} then set score3 = 1 else set score3 = 0
exten => start,10,Set(score3=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score3}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(science-4,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(science-4,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(science-3,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(science-3,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(science-3,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(science-3,start,9)




[science-4]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q4) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SCIENCE_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score4=0)
; if option is equal to ${answer} then set score4 = 1 else set score4 = 0
exten => start,10,Set(score4=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score4}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(science-5,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(science-5,start,1)


exten => 1,1,Set(option=${EXTEN})
same => n,Goto(science-4,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(science-4,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(science-4,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(science-4,start,9)


[science-5]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q5) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${SCIENCE_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score5=0)
; if option is equal to ${answer} then set score5 = 1 else set score5 = 0
exten => start,10,Set(score5=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score5}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Goto(science-value,start,1)
exten => start,15(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,16,Goto(science-value,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(science-5,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(science-5,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(science-5,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(science-5,start,9)



[science-value]
include => science-1
include => science-2
include => science-3
include => science-4
include => science-5
exten => start,1,agi(/var/lib/asterisk/agi-bin/sciences.php,${CALLERID(num)},${score1},${score2},${score3},${score4},${score5})
exten => start,2,Playback(thank-you-for-calling)
exten => start,3,Wait(3)
exten => start,4,Playback(goodbye)
exten => start,5,Hangup()




;================COMMERCIAL QUESTIONS===================

[commercial-1]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q1) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${COMMERCIAL_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score1=0)
; if option is equal to ${answer} then set score1 = 1 else set score1 = 0
exten => start,10,Set(score1=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score1}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(commercial-2,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(commercial-2,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(commercial-1,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(commercial-1,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(commercial-1,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(commercial-1,start,9)



[commercial-2]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q2) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${COMMERCIAL_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score2=0)
; if option is equal to ${answer} then set score2 = 1 else set score2 = 0
exten => start,10,Set(score2=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score2}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(commercial-3,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(commercial-3,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(commercial-2,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(commercial-2,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(commercial-2,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(commercial-2,start,9)



[commercial-3]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q3) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${COMMERCIAL_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score3=0)
; if option is equal to ${answer} then set score3 = 1 else set score3 = 0
exten => start,10,Set(score3=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score3}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(commercial-4,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(commercial-4,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(commercial-3,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(commercial-3,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(commercial-3,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(commercial-3,start,9)




[commercial-4]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q4) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${COMMERCIAL_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score4=0)
; if option is equal to ${answer} then set score4 = 1 else set score4 = 0
exten => start,10,Set(score4=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score4}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(commercial-5,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(commercial-5,start,1)


exten => 1,1,Set(option=${EXTEN})
same => n,Goto(commercial-4,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(commercial-4,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(commercial-4,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(commercial-4,start,9)


[commercial-5]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q5) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${COMMERCIAL_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score5=0)
; if option is equal to ${answer} then set score5 = 1 else set score5 = 0
exten => start,10,Set(score5=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score5}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Goto(commercial-value,start,1)
exten => start,15(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,16,Goto(commercial-value,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(commercial-5,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(commercial-5,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(commercial-5,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(commercial-5,start,9)



[commercial-value]
include => commercial-1
include => commercial-2
include => commercial-3
include => commercial-4
include => commercial-5
exten => start,1,agi(/var/lib/asterisk/agi-bin/commercial.php,${CALLERID(num)},${score1},${score2},${score3},${score4},${score5})
exten => start,2,Playback(thank-you-for-calling)
exten => start,3,Wait(3)
exten => start,4,Playback(goodbye)
exten => start,5,Hangup()



;================ART QUESTIONS===================

[art-1]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q1) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${ART_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score1=0)
; if option is equal to ${answer} then set score1 = 1 else set score1 = 0
exten => start,10,Set(score1=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score1}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(art-2,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(art-2,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(art-1,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(art-1,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(art-1,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(art-1,start,9)



[art-2]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q2) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${ART_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score2=0)
; if option is equal to ${answer} then set score2 = 1 else set score2 = 0
exten => start,10,Set(score2=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score2}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(art-3,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(art-3,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(art-2,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(art-2,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(art-2,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(art-2,start,9)



[art-3]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q3) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${ART_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score3=0)
; if option is equal to ${answer} then set score3 = 1 else set score3 = 0
exten => start,10,Set(score3=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score3}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(art-4,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(art-4,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(art-3,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(art-3,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(art-3,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(art-3,start,9)




[art-4]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q4) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${ART_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score4=0)
; if option is equal to ${answer} then set score4 = 1 else set score4 = 0
exten => start,10,Set(score4=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score4}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Wait(3)
exten => start,15,Goto(art-5,start,1)
exten => start,16(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,17,Wait(3)
exten => start,18,Goto(art-5,start,1)


exten => 1,1,Set(option=${EXTEN})
same => n,Goto(art-4,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(art-4,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(art-4,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(art-4,start,9)


[art-5]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q5) // this has to be a .wav file
;Connect to DB and get id, question and answer at random
exten => start,2,Set(returns=${ART_QUESTION(id,asterisk_url,answer)})
exten => start,3,Set(id=${CUT(returns,\,,1)})
exten => start,4,Set(question=${CUT(returns,\,,2)})
exten => start,5,Set(answer=${CUT(returns,\,,3)})
exten => start,6,Wait(2)
exten => start,7,Background(${question})
;you have 3 seconds to press your keypad
exten => start,8,WaitExten(5)
;set value for score
exten => start,9,Set(score5=0)
; if option is equal to ${answer} then set score5 = 1 else set score5 = 0
exten => start,10,Set(score5=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,11,GotoIf($["${score5}" = "1"]?correct:wrong)
exten => start,12,Wait(3)
exten => start,13(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,14,Goto(art-value,start,1)
exten => start,15(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,16,Goto(art-value,start,1)



exten => 1,1,Set(option=${EXTEN})
same => n,Goto(art-5,start,9)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(art-5,start,9)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(art-5,start,9)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(art-5,start,9)



[art-value]
include => art-1
include => art-2
include => art-3
include => art-4
include => art-5
exten => start,1,agi(/var/lib/asterisk/agi-bin/arts.php,${CALLERID(num)},${score1},${score2},${score3},${score4},${score5})
exten => start,2,Playback(thank-you-for-calling)
exten => start,3,Wait(3)
exten => start,4,Playback(goodbye)
exten => start,5,Hangup()


[monthlystar-1]
;play monthlystar welcome message
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/monthlystar) // this has to be a .wav file
;if you want to answer question on general knowledge, dial 201
;if you want to answer question on sport, dial 202
;if you want to answer question on science, dial 203
;if you want to answer question on commercial, dial 204
;if you want to answer question on art, dial 205
exten => start,2,Background(/var/www/answerfive/html/questions/recording/monthlystarquestionoptions)
exten => start,3,WaitExten(10)


exten => 201,1,Set(qoption=${EXTEN})
same => n,Wait(3)
same => n,GoSub(subCategories-1,start,1(${qoption}))

exten => 202,1,Set(qoption=${EXTEN})
same => n,Wait(3)
same => n,GoSub(subCategories-1,start,1(${qoption}))

exten => 203,1,Set(qoption=${EXTEN})
same => n,Wait(3)
same => n,GoSub(subCategories-1,start,1(${qoption}))

exten => 204,1,Set(qoption=${EXTEN})
same => n,Wait(3)
same => n,GoSub(subCategories-1,start,1(${qoption}))

exten => 205,1,Set(qoption=${EXTEN})
same => n,Wait(3)
same => n,GoSub(subCategories-1,start,1(${qoption}))



;Subroutine
[subCategories-1]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q1) // this has to be a .wav file
exten => start,2,GotoIf($["${ARG1}"="201"]?gknowledge)
exten => start,3,GotoIf($["${ARG1}"="202"]?sport)
exten => start,4,GotoIf($["${ARG1}"="203"]?science)
exten => start,5,GotoIf($["${ARG1}"="204"]?commercial)
exten => start,6,GotoIf($["${ARG1}"="205"]?art)
;Connect to DB and get id, question and answer at random
exten => start,7(gknowledge),Set(returns=${QUESTION_CURRENTAFFAIR(id,asterisk_url,answer)})
exten => start,8,Goto(knife)
exten => start,9(sport),Set(returns=${QUESTION_SPORT(id,asterisk_url,answer)})
exten => start,10,Goto(knife)
exten => start,11(science),Set(returns=${QUESTION_SCIENCE(id,asterisk_url,answer)})
exten => start,12,Goto(knife)
exten => start,13(commercial),Set(returns=${QUESTION_COMMERCIAL(id,asterisk_url,answer)})
exten => start,14,Goto(knife)
exten => start,15(art),Set(returns=${QUESTION_ART(id,asterisk_url,answer)})
exten => start,16,Goto(knife)

exten => start,17(knife),Set(id=${CUT(returns,\,,1)})
exten => start,18,Set(question=${CUT(returns,\,,2)})
exten => start,19,Set(answer=${CUT(returns,\,,3)})
exten => start,20,Wait(2)
exten => start,21,Background(${question})
;you have 5 seconds to press your keypad
exten => start,22,WaitExten(5)
;set value for score
exten => start,23,Set(score1=0)
; if option is equal to ${answer} then set score1 = 1 else set score1 = 0
exten => start,24,Set(score1=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,25,GotoIf($["${score1}" = "1"]?correct:wrong)
exten => start,26,Wait(3)
exten => start,27(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,28,Wait(3)
exten => start,29,GoSub(subCategories-2,start,1(${ARG1}))
exten => start,30(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,31,Wait(3)
exten => start,32,GoSub(subCategories-2,start,1(${ARG1}))


exten => 1,1,Set(option=${EXTEN})
same => n,Goto(subCategories-1,start,23)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(subCategories-1,start,23)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(subCategories-1,start,23)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(subCategories-1,start,23)


[subCategories-2]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q2) // this has to be a .wav file
exten => start,2,GotoIf($["${ARG1}"="201"]?gknowledge)
exten => start,3,GotoIf($["${ARG1}"="202"]?sport)
exten => start,4,GotoIf($["${ARG1}"="203"]?science)
exten => start,5,GotoIf($["${ARG1}"="204"]?commercial)
exten => start,6,GotoIf($["${ARG1}"="205"]?art)
;Connect to DB and get id, question and answer at random
exten => start,7(gknowledge),Set(returns=${QUESTION_CURRENTAFFAIR(id,asterisk_url,answer)})
exten => start,8,Goto(knife)
exten => start,9(sport),Set(returns=${QUESTION_SPORT(id,asterisk_url,answer)})
exten => start,10,Goto(knife)
exten => start,11(science),Set(returns=${QUESTION_SCIENCE(id,asterisk_url,answer)})
exten => start,12,Goto(knife)
exten => start,13(commercial),Set(returns=${QUESTION_COMMERCIAL(id,asterisk_url,answer)})
exten => start,14,Goto(knife)
exten => start,15(art),Set(returns=${QUESTION_ART(id,asterisk_url,answer)})
exten => start,16,Goto(knife)

exten => start,17(knife),Set(id=${CUT(returns,\,,1)})
exten => start,18,Set(question=${CUT(returns,\,,2)})
exten => start,19,Set(answer=${CUT(returns,\,,3)})
exten => start,20,Wait(2)
exten => start,21,Background(${question})
;you have 5 seconds to press your keypad
exten => start,22,WaitExten(5)
;set value for score
exten => start,23,Set(score2=0)
; if option is equal to ${answer} then set score2 = 1 else set score2 = 0
exten => start,24,Set(score2=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,25,GotoIf($["${score2}" = "1"]?correct:wrong)
exten => start,26,Wait(3)
exten => start,27(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,28,Wait(3)
exten => start,29,GoSub(subCategories-3,start,1(${ARG1}))
exten => start,30(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,31,Wait(3)
exten => start,32,GoSub(subCategories-3,start,1(${ARG1}))


exten => 1,1,Set(option=${EXTEN})
same => n,Goto(subCategories-2,start,23)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(subCategories-2,start,23)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(subCategories-2,start,23)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(subCategories-2,start,23)



[subCategories-3]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q3) // this has to be a .wav file
exten => start,2,GotoIf($["${ARG1}"="201"]?gknowledge)
exten => start,3,GotoIf($["${ARG1}"="202"]?sport)
exten => start,4,GotoIf($["${ARG1}"="203"]?science)
exten => start,5,GotoIf($["${ARG1}"="204"]?commercial)
exten => start,6,GotoIf($["${ARG1}"="205"]?art)
;Connect to DB and get id, question and answer at random
exten => start,7(gknowledge),Set(returns=${QUESTION_CURRENTAFFAIR(id,asterisk_url,answer)})
exten => start,8,Goto(knife)
exten => start,9(sport),Set(returns=${QUESTION_SPORT(id,asterisk_url,answer)})
exten => start,10,Goto(knife)
exten => start,11(science),Set(returns=${QUESTION_SCIENCE(id,asterisk_url,answer)})
exten => start,12,Goto(knife)
exten => start,13(commercial),Set(returns=${QUESTION_COMMERCIAL(id,asterisk_url,answer)})
exten => start,14,Goto(knife)
exten => start,15(art),Set(returns=${QUESTION_ART(id,asterisk_url,answer)})
exten => start,16,Goto(knife)

exten => start,17(knife),Set(id=${CUT(returns,\,,1)})
exten => start,18,Set(question=${CUT(returns,\,,2)})
exten => start,19,Set(answer=${CUT(returns,\,,3)})
exten => start,20,Wait(2)
exten => start,21,Background(${question})
;you have 5 seconds to press your keypad
exten => start,22,WaitExten(5)
;set value for score
exten => start,23,Set(score3=0)
; if option is equal to ${answer} then set score3 = 1 else set score3 = 0
exten => start,24,Set(score3=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,25,GotoIf($["${score3}" = "1"]?correct:wrong)
exten => start,26,Wait(3)
exten => start,27(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,28,Wait(3)
exten => start,29,GoSub(subCategories-4,start,1(${ARG1}))
exten => start,30(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,31,Wait(3)
exten => start,32,GoSub(subCategories-4,start,1(${ARG1}))


exten => 1,1,Set(option=${EXTEN})
same => n,Goto(subCategories-3,start,23)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(subCategories-3,start,23)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(subCategories-3,start,23)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(subCategories-3,start,23)



[subCategories-4]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q4) // this has to be a .wav file
exten => start,2,GotoIf($["${ARG1}"="201"]?gknowledge)
exten => start,3,GotoIf($["${ARG1}"="202"]?sport)
exten => start,4,GotoIf($["${ARG1}"="203"]?science)
exten => start,5,GotoIf($["${ARG1}"="204"]?commercial)
exten => start,6,GotoIf($["${ARG1}"="205"]?art)
;Connect to DB and get id, question and answer at random
exten => start,7(gknowledge),Set(returns=${QUESTION_CURRENTAFFAIR(id,asterisk_url,answer)})
exten => start,8,Goto(knife)
exten => start,9(sport),Set(returns=${QUESTION_SPORT(id,asterisk_url,answer)})
exten => start,10,Goto(knife)
exten => start,11(science),Set(returns=${QUESTION_SCIENCE(id,asterisk_url,answer)})
exten => start,12,Goto(knife)
exten => start,13(commercial),Set(returns=${QUESTION_COMMERCIAL(id,asterisk_url,answer)})
exten => start,14,Goto(knife)
exten => start,15(art),Set(returns=${QUESTION_ART(id,asterisk_url,answer)})
exten => start,16,Goto(knife)

exten => start,17(knife),Set(id=${CUT(returns,\,,1)})
exten => start,18,Set(question=${CUT(returns,\,,2)})
exten => start,19,Set(answer=${CUT(returns,\,,3)})
exten => start,20,Wait(2)
exten => start,21,Background(${question})
;you have 5 seconds to press your keypad
exten => start,22,WaitExten(5)
;set value for score
exten => start,23,Set(score4=0)
; if option is equal to ${answer} then set score4 = 1 else set score4 = 0
exten => start,24,Set(score4=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,25,GotoIf($["${score4}" = "1"]?correct:wrong)
exten => start,26,Wait(3)
exten => start,27(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,28,Wait(3)
exten => start,29,GoSub(subCategories-5,start,1(${ARG1}))
exten => start,30(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,31,Wait(3)
exten => start,32,GoSub(subCategories-5,start,1(${ARG1}))


exten => 1,1,Set(option=${EXTEN})
same => n,Goto(subCategories-4,start,23)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(subCategories-4,start,23)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(subCategories-4,start,23)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(subCategories-4,start,23)



[subCategories-5]
exten => start,1,Playback(/var/www/answerfive/html/questions/recording/q5) // this has to be a .wav file
exten => start,2,GotoIf($["${ARG1}"="201"]?gknowledge)
exten => start,3,GotoIf($["${ARG1}"="202"]?sport)
exten => start,4,GotoIf($["${ARG1}"="203"]?science)
exten => start,5,GotoIf($["${ARG1}"="204"]?commercial)
exten => start,6,GotoIf($["${ARG1}"="205"]?art)
;Connect to DB and get id, question and answer at random
exten => start,7(gknowledge),Set(returns=${QUESTION_CURRENTAFFAIR(id,asterisk_url,answer)})
exten => start,8,Goto(knife)
exten => start,9(sport),Set(returns=${QUESTION_SPORT(id,asterisk_url,answer)})
exten => start,10,Goto(knife)
exten => start,11(science),Set(returns=${QUESTION_SCIENCE(id,asterisk_url,answer)})
exten => start,12,Goto(knife)
exten => start,13(commercial),Set(returns=${QUESTION_COMMERCIAL(id,asterisk_url,answer)})
exten => start,14,Goto(knife)
exten => start,15(art),Set(returns=${QUESTION_ART(id,asterisk_url,answer)})
exten => start,16,Goto(knife)

exten => start,17(knife),Set(id=${CUT(returns,\,,1)})
exten => start,18,Set(question=${CUT(returns,\,,2)})
exten => start,19,Set(answer=${CUT(returns,\,,3)})
exten => start,20,Wait(2)
exten => start,21,Background(${question})
;you have 5 seconds to press your keypad
exten => start,22,WaitExten(5)
;set value for score
exten => start,23,Set(score5=0)
; if option is equal to ${answer} then set score5 = 1 else set score5 = 0
exten => start,24,Set(score5=${IF($["${option}" = "${answer}"]?1:0)})
exten => start,25,GotoIf($["${score5}" = "1"]?correct:wrong)
exten => start,26,Wait(3)
exten => start,27(correct),Playback(/var/www/answerfive/html/questions/recording/correct)
exten => start,28,Goto(subCategories-value,start,1)
exten => start,29(wrong),Playback(/var/www/answerfive/html/questions/recording/wrong)
exten => start,30,Goto(subCategories-value,start,1)


exten => 1,1,Set(option=${EXTEN})
same => n,Goto(subCategories-5,start,23)

exten => 2,1,Set(option=${EXTEN})
same => n,Goto(subCategories-5,start,23)

exten => 3,1,Set(option=${EXTEN})
same => n,Goto(subCategories-5,start,23)

exten => 4,1,Set(option=${EXTEN})
same => n,Goto(subCategories-5,start,23)


[subCategories-value]
include => subCategories-1
include => subCategories-2
include => subCategories-3
include => subCategories-4
include => subCategories-5
exten => start,1,agi(/var/lib/asterisk/agi-bin/monthlystar.php,${CALLERID(num)},${score1},${score2},${score3},${score4},${score5})
exten => start,2,Playback(/var/www/answerfive/html/questions/recording/thankyoumessage)
exten => start,3,Wait(3)
exten => start,4,Playback(/var/www/answerfive/html/questions/recording/goodbye)
exten => start,5,Hangup()
